<!DOCTYPE html>
<html>
  <head>
    <title>Managing workflows with RProjects and Version Control</title>
    <meta charset="utf-8">
    <meta name="author" content="Madeline Cowen" />
    <meta name="date" content="2018-11-16" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Managing workflows with RProjects and Version Control
## UCLA EEB Hacky Hours
### Madeline Cowen
### 2018-11-16

---

class: center, middle



&lt;style type="text/css"&gt;
pre {
  background: #D3D3D3;
  max-width: 100%;
  max-height: 100%;
  overflow-x: scroll;
  overflow-y: auto;

}
&lt;/style&gt;



##  Project workflows

--
### Sequence between all stages of a project from conceptualization to completion, which generates files

---

## Two reasons for a standardized project workflow

--

### 1. Research reproducibility üîÅ

--
### 2. Easier collaborations ü§ú ü§õ


---

## 1. Research reproducibility üîÅ

&lt;img src="borregaard-hart.png" width="2236" height="200px" /&gt;

--

&gt; Ecology faces particular challenges in reproducibility because  data  collection  is  often  context  dependent,  and  because  **there  are  few  established  standards  for storing metadata and facilitating study replication**.

--

&gt; The keys to a greater level of reproducibility in ecology are  to establish analytical protocols that are **robust and transparent**, to **faithfully document the analytical process including any failed attempts**, and to ensure that the **storage and acquisition of data is documented and includes the appropriate metadata**.
---

## 2. Easier collaborations  ü§ú ü§õ

--

### Collaborations without standardized project workflows... 

--
#### Emailing documents back and forth

```
Hi all,

Attached is the script to do the ancestral trait reconstruction 
on beak size. I'm also attaching the data file in case it's
easier for you to read this in. 

```

--

#### "I think you forgot to send me beaklengths10.22.18_latest.csv"

--

#### "I can't find the file you are working on"

--

![](read-in-csv-error.png) 

---
class:inverse, middle, center 

## If these problems sound familiar...

### Your life will be improved with a better project workflow

---
class: inverse

## Simple rules for better workflows 

--
### 1. One project, one directory  üìÇ  (üè†)

--
#### Within this directory, use *relative paths*

--
### 2. Clear organization of data, scripts, output, summaries, figures/tables &amp;nbsp;&amp;nbsp;&amp;nbsp; 0Ô∏è‚É£ ‚û°Ô∏è 1Ô∏è‚É£ ‚û°Ô∏è 2Ô∏è‚É£

--
### 3. Workflow backups üåè

--

*Bonus: Version control*
 

---
class: inverse

## Quick aside

#### Directory = folder üìÇ 
  
--
  
#### A file's *path* tells us the string of folders we must go through to find a file üìÇ ‚û°Ô∏è üìÇ ‚û°Ô∏è üìÉ

--

```r
read.csv("~/Desktop/gradschool/ElephantPoopProject/poop_masses.csv")
```

--

```r
read.csv("~/Desktop/gradschool/ElephantPoopProject/eleph_moods.csv")
```

```r
write.csv("~/Desktop/gradschool/ElephantPoopProject/poops-by-mood.csv")
```
--

#### Or


```r
setwd("~/Desktop/gradschool/ElephantPoopProject/")
```

```r
read.csv("poop_masses.csv")
```
---
class: inverse

## RProjects in RStudio make it easy to have clean workflows

--

### What an RProject does:  

#### 1. Creates a file with a .RProj suffix in a directory of your choice

#### 2. When you open this file in RStudio, it opens a new session of RStudio with the working directory set to where the .RProj file lives

#### 3. Everything associated with the project should live within this directory  

#### 4. When working on documents in the project, only need to use relative paths  

---
class: center,middle 

# Let's make a project!

---

## Recommended project organization  

```
my_project
  |- data
  | |- raw-data-files
  | |- cleaned-data-files
  |- code
  | |- 01-clean-raw-data
  | |- 02-run-pairwise-models
  | |- 03-run-multivariate-models
  | |- 04-generate-supplemental-tables
  | |- ...
  |- figures
  | |- ....
  |- tables
  | |- ...
  |- doc
  | |- project-notes.Rmd
  | |- manuscript.Rmd
  | |- ...
  |- ...
```

---
class:inverse  

## Real-life examples

#### 1. [Directory for](https://github.com/atredennick/usses_water) for Tredennick et al. "Ecosystem functional response across precipitation extremes in a sagebrush steppe" 

![](tredennick-repo.png) 

---
class:inverse  

## Real-life examples

#### 2. [Directory for](https://github.com/zapataf/ms_eharrisii) for Zapata &amp; Villarroel "A new species of Escallonia (Escalloniaceae) from the inter-Andean tropical dry forests of Bolivia" 

![](zapata-repo.png) 

---
class:inverse  

## Real-life examples

#### 3. [Directory for](https://github.com/cboettig/noise-phenomena) for Boettiger "Noise-driven phenomena in population biology " 

![](boettiger-repo.png)
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
